# Задание  

* Реализовать на языке C/C++ классические операции перемножения квадратных матриц и умножения матрицы на вектор
* Разделить программу на несколько модулей и провести сборку через статическую линковку
* Подготовьте две сборки с флагами -g и  -O3 и измерьте времена выполнения операций с N = 512, 1024..., 4096
* Измерить времена выполнения программ в виртуальной машине, реальной ОС и (опционально) в докере
* Реализовать базовые скрипты bash, перечисленные на лекции

Бонусы:  

* Дополнительные баллы за использование функций BLAS/cBLAS
* Дополнительные баллы за вызов теста LINPACK на вашем компьютере
* Супербонус: реализовать метод Штрассена перемножения квадратных матриц

# Решение  

* Команды для работы с классом Matrix  

    make или make tests - Для сборки и запуска тестов класса Matrix;  
    make OPTIMIZATION=-O3 - Для сборки с максимальной оптимизацией;  
    make LDFLAGS=-g - Для сборки с дебагом;  
    make EXECUTABLE=new_name - Для сборки с новым именем new_name;  
    make clean - Для удаления исполнительного и всех объектных файлов;  
    ./tests N k - Для умножения двух сгенерированных матриц размера NxN k раз (default k = 2);  
    ./tests - Для проведения тестирования класса.  

* Программа разделена на файл класса Matrix, заголовочный и тесты.  

    bash static_link.sh - Для выполнения статической линковки;  
    ./multiply_static - Для запуска собранной таким образом программы.  

* Время выполнения для сборок multiply_g (флаг -g) и multiply_O3 (флаг -O3) на Winwows 10.  

    *Сборки получены командами:*  
    make EXECUTABLE=multiply_g LDFLAGS=-g  
    make EXECUTABLE=multiply_O3 OPTIMIZATION=-O3  
    *и сохранены в директорию [/src](src)*  

    *Для выполнения замера времени выполнить следующие команды для каждого N:*  
    ./multiply_g N 4  
    ./multiply_O3 N 4  

    *Результаты:*  

    N | multiply_g | multiply_O3
    :---: | :---: | :---:
    **512** | 12.6585 s | 0.534278 s
    **1024** | 139.439 s | 8.19903 s
    **2048** | 914.828 s | 85.172 s
    **4096** | inf |  1841.99 s

* Время выполнения сборки multiply_O3 (флаг -O3) в разных системах.  

    *Запуск докера:*  
    1. Выполнение всех тестов сразу:  
        bash run_docker.sh  

    2. Последовательное выполение:  
        Создание docker image  
        docker build --tag=dimarussio/mult .  

        Запуск контейнера с его удалением после использования  
        docker run --rm dimarussio/mult N k  

        Удаление docker image  
        docker rmi dimarussio/mult  

    *Результаты:*  

    N | Native Windows 10 | virtual box Ubuntu:18.04 | Docker Ubuntu:18.04
    :---: | :---: | :---: | :---:
    **512** | 0.534278 s | inf | 0.332699 s
    **1024** | 8.19903 s | inf | 3.86882 s
    **2048** | 85.172 s | inf | 80.2025 s
    **4096** | 1841.99 s | inf | 759.865 s

* Базовые скрипты bash, перечисленные на лекции, реализованы и находятся в директории [/bash_scripts](bash_scripts)  

* Результат работы теста LINPACK сохранен в файле [Linpack_result](src/Linpack_result.txt)  
